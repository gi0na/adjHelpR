<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Create and Plot Time Unfolded Graphs • adjHelpR</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Create and Plot Time Unfolded Graphs">
<meta property="og:description" content="adjHelpR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">adjHelpR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/time_unfolded_graphs.html">Create and Plot Time Unfolded Graphs</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="time_unfolded_graphs_files/header-attrs-2.6/header-attrs.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Create and Plot Time Unfolded Graphs</h1>
            
      
      
      <div class="hidden name"><code>time_unfolded_graphs.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; Attaching package: 'dplyr'</span>
<span class="co">#&gt; The following objects are masked from 'package:stats':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     filter, lag</span>
<span class="co">#&gt; The following objects are masked from 'package:base':</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;     intersect, setdiff, setequal, union</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">adjHelpR</span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggraph.data-imaginist.com">ggraph</a></span><span class="op">)</span>
<span class="co">#&gt; Loading required package: ggplot2</span></code></pre></div>
<div id="get-the-time-stamped-edge-list" class="section level1">
<h1 class="hasAnchor">
<a href="#get-the-time-stamped-edge-list" class="anchor"></a>Get the time-stamped edge list</h1>
<p>The first step is to load a time-stamped edge list from which to generate the time-unfolded graph. Let’s start from a small synthetic example.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">el</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>
 ts   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span> <span class="fl">1</span>,  <span class="fl">1</span>,    <span class="fl">2</span>,  <span class="fl">2</span>,  <span class="fl">2</span>,     <span class="fl">3</span>,  <span class="fl">3</span>,  <span class="fl">3</span>,      <span class="fl">4</span>,  <span class="fl">4</span>,  <span class="fl">4</span>,      <span class="fl">6</span><span class="op">)</span>,
 from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'A'</span>,<span class="st">'B'</span>,  <span class="st">'A'</span>,<span class="st">'B'</span>,<span class="st">'B'</span>,   <span class="st">'A'</span>,<span class="st">'C'</span>,<span class="st">'C'</span>,    <span class="st">'A'</span>,<span class="st">'B'</span>,<span class="st">'C'</span>,    <span class="st">'D'</span><span class="op">)</span>,
 to   <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'C'</span>,<span class="st">'C'</span>,  <span class="st">'C'</span>,<span class="st">'C'</span>,<span class="st">'D'</span>,   <span class="st">'C'</span>,<span class="st">'D'</span>,<span class="st">'E'</span>,    <span class="st">'C'</span>,<span class="st">'C'</span>,<span class="st">'E'</span>,    <span class="st">'E'</span><span class="op">)</span>
 <span class="op">)</span>
<span class="va">el</span>
<span class="co">#&gt; # A tibble: 12 x 3</span>
<span class="co">#&gt;       ts from  to   </span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt;  1     1 A     C    </span>
<span class="co">#&gt;  2     1 B     C    </span>
<span class="co">#&gt;  3     2 A     C    </span>
<span class="co">#&gt;  4     2 B     C    </span>
<span class="co">#&gt;  5     2 B     D    </span>
<span class="co">#&gt;  6     3 A     C    </span>
<span class="co">#&gt;  7     3 C     D    </span>
<span class="co">#&gt;  8     3 C     E    </span>
<span class="co">#&gt;  9     4 A     C    </span>
<span class="co">#&gt; 10     4 B     C    </span>
<span class="co">#&gt; 11     4 C     E    </span>
<span class="co">#&gt; 12     6 D     E</span></code></pre></div>
<p>The edge list should contain at least 3 column: the edge source, the edge targets, and the timestamps. If you simply want to plot the time-unfolded graph from this edge list, run simply the <code>get_unfolded_plot</code> function. The function takes as option the direction in which you the graph to unfold. Set <code>vertical</code> to TRUE for a vertical plot, and to FALSE otherwise.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_unfolded_plot.html">get_unfolded_plot</a></span><span class="op">(</span>edge.list <span class="op">=</span> <span class="va">el</span>, select_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span>, 
                  resize_ratio <span class="op">=</span> <span class="fl">1.4</span>, enlarge_ratio <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removed 28 rows containing missing values (geom_text).</span>
<span class="co">#&gt; Warning: Removed 30 rows containing missing values (geom_text).</span></code></pre></div>
<p><img src="time_unfolded_graphs_files/figure-html/plot-1.png" width="600"></p>
<p>Note that we had to set the option <code>select_cols</code>. The function assumes that your edge.list takes the form (‘source’, ‘target’,‘timestamps’). Since the edge list we have passed has a different order, we pass to the function the positions of these 3 columns, i.e., 2,3,1, because the first one contains the timetamps.</p>
</div>
<div id="more-control" class="section level1">
<h1 class="hasAnchor">
<a href="#more-control" class="anchor"></a>More control</h1>
<p>Often, we are not satisfied with the default plot, or we are interested in the time-unfolded adjacency matrix to perform further operations. If our aim is the latter, we can use the function <code>get_unfolded_adjacency</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/get_unfolded_adjacency.html">get_unfolded_adjacency</a></span><span class="op">(</span>edge.list <span class="op">=</span> <span class="va">el</span>, select_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span>, vertical <span class="op">=</span> <span class="cn">FALSE</span>, sparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; 35 x 35 sparse Matrix of class "dgCMatrix"</span>
<span class="co">#&gt;    [[ suppressing 35 column names 'A_0', 'A_1', 'A_2' ... ]]</span>
<span class="co">#&gt;                                                                          </span>
<span class="co">#&gt; A_0 . . . . . . . . . . . . . . . 1 . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; A_1 . . . . . . . . . . . . . . . . 1 . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; A_2 . . . . . . . . . . . . . . . . . 1 . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; A_3 . . . . . . . . . . . . . . . . . . 1 . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; A_4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; A_5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; A_6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; B_0 . . . . . . . . . . . . . . . 1 . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; B_1 . . . . . . . . . . . . . . . . 1 . . . . . . 1 . . . . . . . . . . .</span>
<span class="co">#&gt; B_2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; B_3 . . . . . . . . . . . . . . . . . . 1 . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; B_4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; B_5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; B_6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; C_0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; C_1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; C_2 . . . . . . . . . . . . . . . . . . . . . . . . 1 . . . . . . 1 . . .</span>
<span class="co">#&gt; C_3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1 . .</span>
<span class="co">#&gt; C_4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; C_5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; C_6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; D_0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; D_1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; D_2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; D_3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; D_4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; D_5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1</span>
<span class="co">#&gt; D_6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_1 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_2 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_3 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_4 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_5 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span>
<span class="co">#&gt; E_6 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .</span></code></pre></div>
<p>The function returns a square matrix with <span class="math inline">\(n\)</span> times <span class="math inline">\(T\)</span> rows, where <span class="math inline">\(n\)</span> is the number of nodes in the edge list (or that have been passed to the function via the <code>nodes</code> argument), and <span class="math inline">\(T\)</span> is the total length of timesteps. An edge at time <span class="math inline">\(t\)</span> in the edge list, from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span>, is then translated as an edge from the instance <span class="math inline">\(i_{t-1}\)</span> of node <span class="math inline">\(i\)</span>, to the instance <span class="math inline">\(j_t\)</span> of node <span class="math inline">\(j\)</span>.</p>
<p>If we want to plot the time-unfolded graph with full control, we can the use the time-unfolded adjacency matrix constructed as above. However, it is often sufficient to start from a <code>ggraph</code> layout object which assigns the nodes of the matrix on a grid, and then add custom modifications. The function <code>get_unfolded_layout</code> allows to do exactly so.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_unfolded_layout.html">get_unfolded_layout</a></span><span class="op">(</span>edge.list <span class="op">=</span> <span class="va">el</span>, select_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span>, vertical <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">lyt</span>
<span class="co">#&gt;      x y name .ggraph.orig_index circular .ggraph.index</span>
<span class="co">#&gt; 1  0.0 6  A_0                  1    FALSE             1</span>
<span class="co">#&gt; 2  0.6 6  B_0                  2    FALSE             2</span>
<span class="co">#&gt; 3  1.2 6  C_0                  3    FALSE             3</span>
<span class="co">#&gt; 4  1.8 6  D_0                  4    FALSE             4</span>
<span class="co">#&gt; 5  2.4 6  E_0                  5    FALSE             5</span>
<span class="co">#&gt; 6  0.0 5  A_1                  6    FALSE             6</span>
<span class="co">#&gt; 7  0.6 5  B_1                  7    FALSE             7</span>
<span class="co">#&gt; 8  1.2 5  C_1                  8    FALSE             8</span>
<span class="co">#&gt; 9  1.8 5  D_1                  9    FALSE             9</span>
<span class="co">#&gt; 10 2.4 5  E_1                 10    FALSE            10</span>
<span class="co">#&gt; 11 0.0 4  A_2                 11    FALSE            11</span>
<span class="co">#&gt; 12 0.6 4  B_2                 12    FALSE            12</span>
<span class="co">#&gt; 13 1.2 4  C_2                 13    FALSE            13</span>
<span class="co">#&gt; 14 1.8 4  D_2                 14    FALSE            14</span>
<span class="co">#&gt; 15 2.4 4  E_2                 15    FALSE            15</span>
<span class="co">#&gt; 16 0.0 3  A_3                 16    FALSE            16</span>
<span class="co">#&gt; 17 0.6 3  B_3                 17    FALSE            17</span>
<span class="co">#&gt; 18 1.2 3  C_3                 18    FALSE            18</span>
<span class="co">#&gt; 19 1.8 3  D_3                 19    FALSE            19</span>
<span class="co">#&gt; 20 2.4 3  E_3                 20    FALSE            20</span>
<span class="co">#&gt; 21 0.0 2  A_4                 21    FALSE            21</span>
<span class="co">#&gt; 22 0.6 2  B_4                 22    FALSE            22</span>
<span class="co">#&gt; 23 1.2 2  C_4                 23    FALSE            23</span>
<span class="co">#&gt; 24 1.8 2  D_4                 24    FALSE            24</span>
<span class="co">#&gt; 25 2.4 2  E_4                 25    FALSE            25</span>
<span class="co">#&gt; 26 0.0 1  A_5                 26    FALSE            26</span>
<span class="co">#&gt; 27 0.6 1  B_5                 27    FALSE            27</span>
<span class="co">#&gt; 28 1.2 1  C_5                 28    FALSE            28</span>
<span class="co">#&gt; 29 1.8 1  D_5                 29    FALSE            29</span>
<span class="co">#&gt; 30 2.4 1  E_5                 30    FALSE            30</span>
<span class="co">#&gt; 31 0.0 0  A_6                 31    FALSE            31</span>
<span class="co">#&gt; 32 0.6 0  B_6                 32    FALSE            32</span>
<span class="co">#&gt; 33 1.2 0  C_6                 33    FALSE            33</span>
<span class="co">#&gt; 34 1.8 0  D_6                 34    FALSE            34</span>
<span class="co">#&gt; 35 2.4 0  E_6                 35    FALSE            35</span></code></pre></div>
<p>We can then proceed plotting the layout with our chosen specs. By passing the node labels in our preferred order we ensure the correct ordering of the nodes. For example, here we can plot from E to A</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get the nodes' labels from the edge list</span>
<span class="va">node.labels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sort.html">sort</a></span><span class="op">(</span><span class="fu"><a href="../reference/nodes_from_el.html">nodes_from_el</a></span><span class="op">(</span>edge.list <span class="op">=</span> <span class="va">el</span>, select_cols <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span>, decreasing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">lyt</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_unfolded_layout.html">get_unfolded_layout</a></span><span class="op">(</span>edge.list <span class="op">=</span> <span class="va">el</span>, select_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">:</span><span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span>, 
                           vertical <span class="op">=</span> <span class="cn">TRUE</span>, nodes <span class="op">=</span> <span class="va">node.labels</span>,
                           resize_ratio <span class="op">=</span> <span class="fl">.75</span>, enlarge_ratio <span class="op">=</span> <span class="fl">.8</span><span class="op">)</span>

<span class="co"># generate the plot</span>
<span class="va">lyt</span> <span class="op">%&gt;%</span>
  <span class="co"># create the graph</span>
    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/ggraph.html">ggraph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># add edges with arrows</span>
    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_edge_link.html">geom_edge_link</a></span><span class="op">(</span>width <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="st">'mm'</span><span class="op">)</span>,
                  arrow <span class="op">=</span> <span class="fu">arrow</span><span class="op">(</span>length <span class="op">=</span> <span class="fu">grid</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/grid/unit.html">unit</a></span><span class="op">(</span><span class="fl">1</span>, <span class="st">'mm'</span><span class="op">)</span>, type <span class="op">=</span> <span class="st">'closed'</span><span class="op">)</span>,
                  end_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">'mm'</span><span class="op">)</span>,
                  start_cap <span class="op">=</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geometry.html">circle</a></span><span class="op">(</span><span class="fl">2</span>, <span class="st">'mm'</span><span class="op">)</span>,
                  color<span class="op">=</span><span class="st">'gray50'</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># add nodes</span>
    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_point.html">geom_node_point</a></span><span class="op">(</span>size<span class="op">=</span><span class="fl">2</span><span class="op">)</span> <span class="op">+</span>
  <span class="co"># add timestamps' labels on the right</span>
    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_text.html">geom_node_text</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>
      label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">'_.*'</span>, <span class="st">''</span>, <span class="va">name</span><span class="op">)</span><span class="op">==</span><span class="va">node.labels</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,
                   <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="va">node.labels</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,<span class="st">'_'</span><span class="op">)</span>, <span class="st">''</span>, <span class="va">name</span><span class="op">)</span>,
                   <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,
      nudge_x <span class="op">=</span> <span class="op">-</span> <span class="fl">.6</span>,
      size<span class="op">=</span><span class="fl">5</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="co"># add nodes' names labels at the top</span>
    <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/geom_node_text.html">geom_node_text</a></span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>
      label<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/ifelse.html">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">'.*_'</span>, <span class="st">''</span>, <span class="va">name</span><span class="op">)</span><span class="op">==</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">min</a></span><span class="op">(</span><span class="va">el</span><span class="op">$</span><span class="va">ts</span><span class="op">)</span><span class="op">-</span><span class="fl">1</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html">gsub</a></span><span class="op">(</span><span class="st">'_.*'</span>, <span class="st">''</span>, <span class="va">name</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>,
      nudge_y <span class="op">=</span> <span class="fl">0.6</span>,
      size<span class="op">=</span><span class="fl">5</span>
    <span class="op">)</span> <span class="op">+</span>
    <span class="fu">coord_fixed</span><span class="op">(</span>clip<span class="op">=</span><span class="st">'off'</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggraph.data-imaginist.com/reference/theme_graph.html">theme_graph</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
    <span class="fu">theme</span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span>
<span class="co">#&gt; Warning: Removed 28 rows containing missing values (geom_text).</span>
<span class="co">#&gt; Warning: Removed 30 rows containing missing values (geom_text).</span></code></pre></div>
<p><img src="time_unfolded_graphs_files/figure-html/plotlayout-1.png" width="1093.75" height="600"></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Giona Casiraghi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
